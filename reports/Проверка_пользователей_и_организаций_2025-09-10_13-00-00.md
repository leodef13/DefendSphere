# –û—Ç—á–µ—Ç: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π

**–î–∞—Ç–∞:** 2025-09-10 13:00:00  
**–°—Ç–∞—Ç—É—Å:** –ó–∞–≤–µ—Ä—à–µ–Ω–æ  
**–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏, –∞–∫—Ç–∏–≤—ã, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏

### ‚úÖ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

| –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å | Email | –ü–æ–ª–Ω–æ–µ –∏–º—è | –†–æ–ª—å | –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è | –°—Ç–∞—Ç—É—Å |
|-------------|-------|------------|------|-------------|--------|
| **user1** | user1@company-lld.com | John Smith | admin | Company LLD | ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω |
| **user2** | user2@watson-morris.com | Bob Wilson | user | Watson Morris | ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω |
| **user3** | user3@company-lld.com | Jane Doe | user | Company LLD | ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω |
| **jon** | jon@watson-morris.com | Jon Smith | user | Watson Morris | ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω |

### üè¢ –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º

#### Company LLD
- **user1** (admin) - CEO
- **user3** (user) - CISO

#### Watson Morris  
- **user2** (user) - Security Analyst
- **jon** (user) - Security Manager

### üîê –°—Ç–∞—Ç—É—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

| –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å | –õ–æ–≥–∏–Ω | –¢–æ–∫–µ–Ω | /api/auth/me | /api/assets | /api/reports |
|-------------|-------|-------|--------------|-------------|--------------|
| user1 | ‚úÖ | ‚úÖ | ‚ùå Invalid token | ‚ùå Invalid token | ‚ùå Invalid token |
| user2 | ‚úÖ | ‚úÖ | ‚ùå Invalid token | ‚ùå Invalid token | ‚ùå Invalid token |
| user3 | ‚úÖ | ‚úÖ | ‚ùå Invalid token | ‚ùå Invalid token | ‚ùå Invalid token |
| jon | ‚úÖ | ‚úÖ | ‚ùå Invalid token | ‚ùå Invalid token | ‚ùå Invalid token |

### üìà –î–∞–Ω–Ω—ã–µ –ø–æ –∞–∫—Ç–∏–≤–∞–º

**–°—Ç–∞—Ç—É—Å:** ‚ùå **–ü–†–û–ë–õ–ï–ú–ê** - –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç "Invalid token" –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∞–∫—Ç–∏–≤–æ–≤

**–ü—Ä–∏—á–∏–Ω–∞:** Middleware –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–µ –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ Redis –ø–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –∫–ª—é—á—É.

## üîç –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–º–µ—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö:
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ email –∞–¥—Ä–µ—Å–∞
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ú–∞—Å—Å–∏–≤ `organizations` –∑–∞–ø–æ–ª–Ω–µ–Ω
- ‚úÖ –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

### 2. –ü—Ä–æ–±–ª–µ–º–∞ —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π

**–û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
- –¢–æ–∫–µ–Ω—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –õ–æ–≥–∏–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- Middleware –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç "Invalid token"

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø—Ä–∏—á–∏–Ω–∞:**
- –¢–æ–∫–µ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç `userId: "2"` –∏ `username: "user1"`
- Middleware –∏—â–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –∫–ª—é—á—É `user:user1`
- –í Redis –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –ø–æ –∫–ª—é—á—É `user:2`

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

**–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
1. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω middleware –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –æ–±–æ–∏–º –∫–ª—é—á–∞–º
2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
3. ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ fallback –¥–∞–Ω–Ω—ã—Ö

**–¢—Ä–µ–±—É–µ—Ç—Å—è:**
- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ middleware
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –≤ Redis

## üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:
1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä** –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ middleware
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–ª—é—á–µ–π** –≤ Redis
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é** –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
1. **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á–∏** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ Redis
2. **–î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
3. **–°–æ–∑–¥–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è middleware –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:

| –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å | –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è | –ê–∫—Ç–∏–≤—ã | –û—Ç—á–µ—Ç—ã | –°—Ç–∞—Ç—É—Å |
|-------------|-------------|--------|--------|--------|
| user1 | Company LLD | ‚úÖ 4 –∞–∫—Ç–∏–≤–∞ | ‚úÖ –î–æ—Å—Ç—É–ø | –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø |
| user2 | Watson Morris | ‚úÖ –ê–∫—Ç–∏–≤—ã WM | ‚úÖ –î–æ—Å—Ç—É–ø | –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø |
| user3 | Company LLD | ‚úÖ 4 –∞–∫—Ç–∏–≤–∞ | ‚úÖ –î–æ—Å—Ç—É–ø | –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø |
| jon | Watson Morris | ‚úÖ –ê–∫—Ç–∏–≤—ã WM | ‚úÖ –î–æ—Å—Ç—É–ø | –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø |

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–°—Ç–∞—Ç—É—Å:** üü° **–ß–∞—Å—Ç–∏—á–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**

- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ  
- ‚úÖ –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∞–∫—Ç—É–∞–ª—å–Ω—ã
- ‚ùå Middleware –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.